---
import "../styles/global.css";
import BaseLayout from "../components/BaseLayout.astro";
import NowPlaying from "../components/NowPlaying.svelte";
import butterwort from "../../public/butterwort.webp";
import display from "../../public/display.webp";
import floridagreen from "../../public/floridagreen.webp";
import greenhouse from "../../public/greenhouse.webp";
import pitcherplant from "../../public/pitcherplant.webp";
import syngonium from "../../public/syngonium.webp";
import Hobbycard from "../components/hobbycard.astro";
import ImageWithSpinner from "../components/ImageWithSpinner.astro";
---

<BaseLayout title="/hobbies">
  <section class="mt-6 mb-6" id="title">
    <h1 class="text-5xl text-black font-bold">/hobbies</h1>
  </section>

  <section class="mt-6 mb-6 flex flex-col gap-4 text-2xl">
    <Hobbycard id="hobby1" extraClasses="flex flex-col">
      <div class="rounded-lg flex flex-wrap justify-center gap-2">
        <div class="relative">
          <ImageWithSpinner
            src={butterwort}
            alt="Image of butterwort"
            imgClass="border-strongblue border-2 rounded-lg max-w-66 max-h-100 object-cover shadow-md"
            containerClass=""
            loading="eager"
          />
          <div
            class="absolute inset-0 bg-strongblue/80 text-white opacity-0 flex items-center flex-col text-center p-2 rounded-lg transition-opacity duration-300 hover:opacity-100"
          >
            <h1 class="font-semibold">/hobbies/plants</h1>
            <p>Pinguicula Primuliflora</p>
          </div>
        </div>

        <div class="relative">
          <ImageWithSpinner
            src={display}
            alt="Image of plant display"
            imgClass="border-strongblue border-2 rounded-lg max-w-66 max-h-100 object-cover shadow-md"
            containerClass=""
            loading="eager"
          />
          <div
            class="absolute inset-0 bg-strongblue/80 text-white opacity-0 flex items-center flex-col text-center p-2 rounded-lg transition-opacity duration-300 hover:opacity-100"
          >
            <h1 class="font-semibold">/hobbies/plants</h1>
            <p>
              Top to bottom: 1. Pothos/succulents, 2. Philodendron 'Florida
              Ghost'/begonia, 3. Chinese money plant/Nepenthes Ventrata/spider
              plant
            </p>
          </div>
        </div>

        <div class="relative">
          <ImageWithSpinner
            src={floridagreen}
            alt="Image of florida green plant"
            imgClass="border-strongblue border-2 rounded-lg max-w-66 max-h-100 object-cover shadow-md"
            containerClass=""
            loading="eager"
          />
          <div
            class="absolute inset-0 bg-strongblue/80 text-white opacity-0 flex items-center flex-col text-center p-2 rounded-lg transition-opacity duration-300 hover:opacity-100"
          >
            <h1 class="font-semibold">/hobbies/plants</h1>
            <p>Philodendron 'Florida Green'</p>
          </div>
        </div>

        <div class="relative">
          <ImageWithSpinner
            src={greenhouse}
            alt="Image of greenhouse"
            imgClass="border-strongblue border-2 rounded-lg max-w-66 max-h-100 object-cover shadow-md"
            containerClass=""
            loading="eager"
          />
          <div
            class="absolute inset-0 bg-strongblue/80 text-white opacity-0 flex items-center flex-col text-center p-2 rounded-lg transition-opacity duration-300 hover:opacity-100"
          >
            <h1 class="font-semibold">/hobbies/plants</h1>
            <p>Succulents and Nepenthes Ventrata</p>
          </div>
        </div>

        <div class="relative">
          <ImageWithSpinner
            src={pitcherplant}
            alt="Image of pitcher plant"
            imgClass="border-strongblue border-2 rounded-lg max-w-66 max-h-100 object-cover shadow-md"
            containerClass=""
            loading="eager"
          />
          <div
            class="absolute inset-0 bg-strongblue/80 text-white opacity-0 flex items-center flex-col text-center p-2 rounded-lg transition-opacity duration-300 hover:opacity-100"
          >
            <h1 class="font-semibold">/hobbies/plants</h1>
            <p>Nepenthes Ventrata</p>
          </div>
        </div>

        <div class="relative">
          <ImageWithSpinner
            src={syngonium}
            alt="Image of syngonium"
            imgClass="border-strongblue border-2 rounded-lg max-w-66 max-h-100 object-cover shadow-md"
            containerClass=""
            loading="eager"
          />
          <div
            class="absolute inset-0 bg-strongblue/80 text-white opacity-0 flex items-center flex-col text-center p-2 rounded-lg transition-opacity duration-300 hover:opacity-100"
          >
            <h1 class="font-semibold">/hobbies/plants</h1>
            <p>Syngonium Albo</p>
          </div>
        </div>
      </div>
    </Hobbycard>

    <Hobbycard
      id="hobby2"
      extraClasses="flex flex-col items-center overflow-hidden hover:bg-strongblue"
    >
      <iframe
        class="rounded-lg opacity-100 group-hover:opacity-0 transition-opacity duration-300 shadow-md w-full"
        height="160"
        frameborder="0"
        allowtransparency="true"
        scrolling="no"
        src="https://www.strava.com/athletes/26637430/activity-summary/48fe8c3af0b45ca094837dea098009f24e3385ea"
      ></iframe>
      <a
        target="_parent"
        href="https://www.strava.com/athletes/26637430?utm_campaign=athlete_share&utm_content=26637430&utm_medium=widget&utm_source=localhost"
        class="absolute bottom-5 right-5 primary z-10"
      >
        View all of Anthony's activity Â»
      </a>
      <div
        class="absolute inset-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 overflow-auto"
      >
        <h1 class="font-semibold">/hobbies/biking</h1>
        <p>
          I enjoy biking around city and nature trails. I work on my bike myself
          for fun and to keep it in good shape. Whenever I'm in a new city I try
          to find new bike shops to visit.
        </p>
      </div>
    </Hobbycard>

    <Hobbycard id="hobby3" extraClasses="flex flex-row hover:bg-strongblue">
      <NowPlaying client:idle />
    </Hobbycard>

    <Hobbycard
      id="hobby4"
      extraClasses="flex flex-row gap-4 hover:bg-strongblue"
    >
      <iframe
        src="https://youtube.com/embed/tQmb6uMJrDI?si=nQAELwCcdJgEdYNQ&autoplay=1&mute=1&rel=0&loop=1&playlist=tQmb6uMJrDI"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; web-share"
        class="rounded-lg shadow-md"
      >
      </iframe>
      <div
        class="text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"
      >
        <h1 class="font-semibold">/hobbies/coffee</h1>
        <p>
          I started making coffee myself a few years ago, but my Cuban family's
          habit of drinking it twice daily automatically made me a coffee
          drinker. I have a ton of different coffee brewers at this point like a
          moka pot or cafetera, chemex, and most recently a manual lever
          espresso machine. I like drinking Cuban traditional coffee with
          whipped sugar and moka pot coffee, iced lattes with flavoring or
          without, and cortados. I usually get my beans from different local
          roasters. Some of my favorites are Resident in Gainesville and Onyx
          (which isn't local but it was really good).
        </p>
      </div>
    </Hobbycard>
  </section>
</BaseLayout>

<script is:inline>
  function runAnimation() {
    const elements = [
      document.getElementById("hobby1"),
      document.getElementById("hobby2"),
      document.getElementById("hobby3"),
      document.getElementById("hobby4"),
    ].filter(Boolean);

    elements.forEach((el, index) => {
      el.style.opacity = "0";
      el.style.transform = "translateY(20px)";
      el.getBoundingClientRect();
      el.style.transition = "opacity 0.6s ease-out, transform 0.6s ease-out";
      el.style.transitionDelay = `500ms`;
      requestAnimationFrame(() => {
        el.style.opacity = "1";
        el.style.transform = "translateY(0)";
      });
    });
  }

  function hideSpinners() {
    document.querySelectorAll(".relative").forEach((rel) => {
      const img = rel.querySelector("img");
      const spinner = rel.querySelector(".spinner");
      if (!spinner || !img) return;

      if (img.complete && img.naturalHeight !== 0) {
        spinner.style.display = "none";
        return;
      }

      img.addEventListener(
        "load",
        () => {
          spinner.style.display = "none";
        },
        { once: true }
      );
      img.addEventListener(
        "error",
        () => {
          spinner.style.display = "none";
        },
        { once: true }
      );
    });
  }

  runAnimation();
  hideSpinners();
  document.addEventListener("astro:after-swap", () => {
    runAnimation();
    hideSpinners();
  });
</script>
